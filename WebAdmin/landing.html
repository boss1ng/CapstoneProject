<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QSee - Web Admin Panel</title>

    <!-- CSS -->
    <link rel="stylesheet" href="styles/landing.css">

    <!-- BOOTSTRAP v5.3 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-HwwvtgBNo3bZJJLYd8oVXjrBZt8cqVSpeBNS5n7C8IVInixGAoxmnlMuBnhbgrkm" crossorigin="anonymous"></script>

    <!-- BOOTSTRAP v5.0 -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>

    <!-- Crypto-JS for Encryption -->
    <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.js"></script> -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/3.1.9-1/crypto-js.js"></script>

</head>
<body style="background-color: #2F414F;">
    <div class="sidebar">
        <div class="d-flex align-items-center justify-content-center m-3 mt-5">
            <img src="images/Qsee.png">
        </div>

        <div class="aSelectedCont container d-flex align-items-center mt-5" id="landingCont">
            <svg xmlns="http://www.w3.org/2000/svg" width="50" height="50" fill="white" class="bi bi-person-circle" id="landingCont" style="margin-left: 40px;" viewBox="0 0 16 16">
                <path d="M11 6a3 3 0 1 1-6 0 3 3 0 0 1 6 0z"/>
                <path fill-rule="evenodd" d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8zm8-7a7 7 0 0 0-5.468 11.37C3.242 11.226 4.805 10 8 10s4.757 1.225 5.468 2.37A7 7 0 0 0 8 1z"/>
            </svg>
            <a href="landing.html" class="mx-4">Account</a>
        </div>

        <div class="aCont container d-flex align-items-center mt-3" id="categoriesCont">
            <svg xmlns="http://www.w3.org/2000/svg" width="50" height="50" fill="black" class="bi bi-grid" id="categoriesCont" style="margin-left: 40px;" viewBox="0 0 16 16">
                <path d="M1 2.5A1.5 1.5 0 0 1 2.5 1h3A1.5 1.5 0 0 1 7 2.5v3A1.5 1.5 0 0 1 5.5 7h-3A1.5 1.5 0 0 1 1 5.5v-3zM2.5 2a.5.5 0 0 0-.5.5v3a.5.5 0 0 0 .5.5h3a.5.5 0 0 0 .5-.5v-3a.5.5 0 0 0-.5-.5h-3zm6.5.5A1.5 1.5 0 0 1 10.5 1h3A1.5 1.5 0 0 1 15 2.5v3A1.5 1.5 0 0 1 13.5 7h-3A1.5 1.5 0 0 1 9 5.5v-3zm1.5-.5a.5.5 0 0 0-.5.5v3a.5.5 0 0 0 .5.5h3a.5.5 0 0 0 .5-.5v-3a.5.5 0 0 0-.5-.5h-3zM1 10.5A1.5 1.5 0 0 1 2.5 9h3A1.5 1.5 0 0 1 7 10.5v3A1.5 1.5 0 0 1 5.5 15h-3A1.5 1.5 0 0 1 1 13.5v-3zm1.5-.5a.5.5 0 0 0-.5.5v3a.5.5 0 0 0 .5.5h3a.5.5 0 0 0 .5-.5v-3a.5.5 0 0 0-.5-.5h-3zm6.5.5A1.5 1.5 0 0 1 10.5 9h3a1.5 1.5 0 0 1 1.5 1.5v3a1.5 1.5 0 0 1-1.5 1.5h-3A1.5 1.5 0 0 1 9 13.5v-3zm1.5-.5a.5.5 0 0 0-.5.5v3a.5.5 0 0 0 .5.5h3a.5.5 0 0 0 .5-.5v-3a.5.5 0 0 0-.5-.5h-3z"/>
            </svg>
            <a href="categories.html" class="mx-4">Categories</a>
        </div>

        <div class="aCont container d-flex align-items-center mt-3" id="placeCont">
            <svg xmlns="http://www.w3.org/2000/svg" width="50" height="50" fill="black" class="bi bi-map" id="placeCont" style="margin-left: 40px;" viewBox="0 0 16 16">
                <path fill-rule="evenodd" d="M15.817.113A.5.5 0 0 1 16 .5v14a.5.5 0 0 1-.402.49l-5 1a.502.502 0 0 1-.196 0L5.5 15.01l-4.902.98A.5.5 0 0 1 0 15.5v-14a.5.5 0 0 1 .402-.49l5-1a.5.5 0 0 1 .196 0L10.5.99l4.902-.98a.5.5 0 0 1 .415.103zM10 1.91l-4-.8v12.98l4 .8V1.91zm1 12.98 4-.8V1.11l-4 .8v12.98zm-6-.8V1.11l-4 .8v12.98l4-.8z"/>
            </svg>
            <a href="places.html" class="mx-4">Places</a>
        </div>

        <div class="aCont container d-flex align-items-center mt-3" id="signoutCont">
            <svg xmlns="http://www.w3.org/2000/svg" width="50" height="50" fill="black" class="bi bi-box-arrow-left" id="signoutCont" style="margin-left: 40px;" viewBox="0 0 16 16">
                <path fill-rule="evenodd" d="M6 12.5a.5.5 0 0 0 .5.5h8a.5.5 0 0 0 .5-.5v-9a.5.5 0 0 0-.5-.5h-8a.5.5 0 0 0-.5.5v2a.5.5 0 0 1-1 0v-2A1.5 1.5 0 0 1 6.5 2h8A1.5 1.5 0 0 1 16 3.5v9a1.5 1.5 0 0 1-1.5 1.5h-8A1.5 1.5 0 0 1 5 12.5v-2a.5.5 0 0 1 1 0v2z"/>
                <path fill-rule="evenodd" d="M.146 8.354a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L1.707 7.5H10.5a.5.5 0 0 1 0 1H1.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3z"/>
            </svg>
            <a id="signoutHref" class="mx-4">Sign Out</a>
        </div>
    </div>
      
    <div class="contentCont">
        <div class="container" style="margin-top: 50px; margin-left: 50px;">
            <h1 class="displayHeading">Account Settings</h1>
            <div class="container mx-5 my-4">
                <h2 class="displayHeading">Administrator Info</h2>
                <div class="container m-5">
                    <div class="d-flex align-items-center mt-5">
                        <h4 class="displayHeading mx-3">First Name: </h4>
                        <input type="text" class="form-control mx-5" id="firstName" onchange="updatePersonalData()" aria-label="Username" aria-describedby="addon-wrapping"/>
                    </div>
                    
                    <div class="adminInfo d-flex align-items-center mt-4">
                        <h4 class="displayHeading mx-3">Last Name: </h4>
                        <input type="text" class="form-control mx-5" id="lastName" onchange="updatePersonalData()" aria-label="Username" aria-describedby="addon-wrapping"/>
                    </div>

                    <div class="adminInfo d-flex align-items-center mt-4">
                        <h4 class="displayHeading mx-3">Email Address: </h4>
                        <input type="text" class="form-control mx-2" id="emailAddress" disabled aria-label="Username" aria-describedby="addon-wrapping"/>
                    </div>
                </div>

                <div class="container" style="margin-left: 290px;">
                    <button type="button" class="btn btn-secondary btn-lg" id="btnCancelInfo" disabled>Cancel</button>
                    <button type="button" class="btn btn-secondary btn-lg" id="btnSaveInfo" style="margin-left: 100px;" disabled>Save</button>                
                </div>
            </div>


            <div class="container mx-5 my-4">
                <h2 class="displayHeading">Change Password</h2>
                <div class="container m-5">
                    <div class="d-flex align-items-center mt-5">
                        <h4 class="displayHeading mx-3">Current Password: </h4>
                        <input type="password" class="form-control mx-3" id="currPass" onchange="updatePasswordData()" placeholder="" aria-label="Username" aria-describedby="addon-wrapping"/>
                    </div>
                    
                    <div class="adminInfo d-flex align-items-center mt-4">
                        <h4 class="displayHeading mx-3">New Password: </h4>
                        <input type="password" class="form-control mx-5" id="newPass" onchange="updatePasswordData()" placeholder="" aria-label="Username" aria-describedby="addon-wrapping"/>
                    </div>

                    <div class="adminInfo d-flex align-items-center mt-4">
                        <h4 class="displayHeading mx-3">Confirm Password: </h4>
                        <input type="password" class="form-control mx-2" id="rePass" onchange="updatePasswordData()" placeholder="" aria-label="Username" aria-describedby="addon-wrapping"/>
                    </div>
                </div>

                <div class="container" style="margin-left: 290px;">
                    <button type="button" class="btn btn-secondary btn-lg" id="btnCancelPass" disabled>Cancel</button>
                    <button type="button" class="btn btn-secondary btn-lg" id="btnSavePass" style="margin-left: 100px;" disabled>Save</button>                
                </div>
            </div>
        </div>
    </div>

    <!-- ALERT MESSAGE (SUCCESS) -->
    <div class="alertCont">
        <div class="alert alert-success d-flex align-items-center" role="alert" id="editSuccess">
            <svg xmlns="http://www.w3.org/2000/svg" width="35" height="35" fill="currentColor" class="bi bi-check-circle-fill mx-3" viewBox="0 0 16 16">
                <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"/>
            </svg>
                Account Information Successfuly Updated.
        </div>
    </div>

    <!-- ALERT MESSAGE (FAILED) -->
    <div class="alertCont">
        <div class="alert alert-danger d-flex align-items-center" role="alert" id="editFailed">
            <svg xmlns="http://www.w3.org/2000/svg" width="35" height="35" fill="currentColor" class="bi bi-exclamation-triangle-fill mx-3" viewBox="0 0 16 16">
                <path d="M8.982 1.566a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566zM8 5c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995A.905.905 0 0 1 8 5zm.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2z"/>
            </svg>
                Update Failed. Please try again.
        </div>
    </div>

    <!-- ALERT MESSAGE (FAILED) -->
    <div class="alertCont">
        <div class="alert alert-danger d-flex align-items-center" role="alert" id="editPassFailed">
            <svg xmlns="http://www.w3.org/2000/svg" width="35" height="35" fill="currentColor" class="bi bi-exclamation-triangle-fill mx-3" viewBox="0 0 16 16">
                <path d="M8.982 1.566a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566zM8 5c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995A.905.905 0 0 1 8 5zm.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2z"/>
            </svg>
                Password must meet the complexity requirements (<i>minimum length of eigth characters; at least one uppercase, lowercase, numeric, and special character</i>).
        </div>
    </div>

    <!-- ALERT MESSAGE (SUCCESS) -->
    <div class="alertCont">
        <div class="alert alert-success d-flex align-items-center" role="alert" id="logout">
            <svg xmlns="http://www.w3.org/2000/svg" width="35" height="35" fill="currentColor" class="bi bi-check-circle-fill mx-3" viewBox="0 0 16 16">
                <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"/>
            </svg>
                Logout successful. You have been logged out of your account.
        </div>
    </div>

    <script>
        function updatePersonalData() {
            document.getElementById('btnCancelInfo').disabled = false;
            document.getElementById('btnSaveInfo').disabled = false;
        }

        function updatePasswordData() {

            var currPass = document.getElementById('currPass').value;
            var newPass = document.getElementById('newPass').value;  
            var rePass = document.getElementById('rePass').value;

            if (currPass != "" && newPass != "" && rePass != "") {
                document.getElementById('btnCancelPass').disabled = false;
                document.getElementById('btnSavePass').disabled = false;
            }
        }
    </script>

    <script type="module">
        // Import the functions you need from the SDKs you need
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.2.0/firebase-app.js";
        import { getAnalytics } from "https://www.gstatic.com/firebasejs/10.2.0/firebase-analytics.js";
        // TODO: Add SDKs for Firebase products that you want to use
        // https://firebase.google.com/docs/web/setup#available-libraries
      
        // Your web app's Firebase configuration
        // For Firebase JS SDK v7.20.0 and later, measurementId is optional
        const firebaseConfig = {
          apiKey: "AIzaSyB08GrYWprzzbddoHqvTR5Ln-9i0CEXqHs",
          authDomain: "capstone-project-ffe21.firebaseapp.com",
          databaseURL: "https://capstone-project-ffe21-default-rtdb.asia-southeast1.firebasedatabase.app",
          projectId: "capstone-project-ffe21",
          storageBucket: "capstone-project-ffe21.appspot.com",
          messagingSenderId: "67612839105",
          appId: "1:67612839105:web:7d8ffd05e13733ef609840",
          measurementId: "G-2BJMTCZ2SM"
        };
      
        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const analytics = getAnalytics(app);

        import {getDatabase, set, get, update, remove, ref, child}
        from "https://www.gstatic.com/firebasejs/10.2.0/firebase-database.js"
        
        const db = getDatabase();

        var inputFName = document.getElementById("firstName");
        var inputLName = document.getElementById("lastName");
        var inputEmail = document.getElementById("emailAddress");

        var inputCurrentPass = document.querySelector("#currPass");
        var inputNewPass = document.querySelector("#newPass");
        var inputRePass = document.querySelector("#rePass");

        var editSuccessAlert = document.getElementById("editSuccess");
        var editFailedAlert = document.getElementById("editFailed");
        var editPassFailedAlert = document.getElementById("editPassFailed");
        var logoutAlert = document.getElementById("logout");

        var userID = 1;

        var firebaseFName = null;
        var firebaseLName = null;
        var firebasePassword = null;

        sessionStorage.clear()
        // localStorage.clear();
        if (localStorage.getItem('loggedUser') == "" || localStorage.getItem('loggedUser') == null) {
            window.location.replace("index.html");
        }
        
        searchData();

        function searchData() {
            const dbref = ref(db);
            get(child(dbref, "User/" + userID))
            .then( (snapshot)=> {
                if(snapshot.exists()) {

                    // console.log(snapshot.val().FirstName);       // Maria Victoria
                    // console.log(snapshot.val().LastName);        // Auto
                    // console.log(snapshot.val().Email);           // joeybryan.pintor.cics@ust.edu.ph
                    // console.log(snapshot.val().Password);        // Capstone_QS33
                    // console.log(snapshot.val().Birthdate);       // 17/08/2022
                    // console.log(snapshot.val().DateCreated);     // 2023-08-27

                    const decryptedDataFName = CryptoJS.AES.decrypt(snapshot.val().FirstName, secretKey).toString(CryptoJS.enc.Utf8);
                    const decryptedDataLName = CryptoJS.AES.decrypt(snapshot.val().LastName, secretKey).toString(CryptoJS.enc.Utf8);
                    const decryptedDataEmail = CryptoJS.AES.decrypt(snapshot.val().Email, secretKey).toString(CryptoJS.enc.Utf8);
                    const decryptedDataPass = CryptoJS.AES.decrypt(snapshot.val().Password, secretKey).toString(CryptoJS.enc.Utf8);
                    const decryptedDataBirthdate = CryptoJS.AES.decrypt(snapshot.val().Birthdate, secretKey).toString(CryptoJS.enc.Utf8);
                    const decryptedDataDateCreated = CryptoJS.AES.decrypt(snapshot.val().DateCreated, secretKey).toString(CryptoJS.enc.Utf8);

                    // console.log(decryptedDataFName);
                    // console.log(decryptedDataLName);
                    // console.log(decryptedDataEmail);
                    // console.log(decryptedDataPass);
                    // console.log(decryptedDataBirthdate);
                    // console.log(decryptedDataDateCreated);

                    inputFName.value = decryptedDataFName;
                    inputLName.value = decryptedDataLName;
                    inputEmail.value = decryptedDataEmail; 

                    //firebaseFName = snapshot.val().FirstName;
                    //firebaseLName = snapshot.val().LastName;
                    firebaseFName = decryptedDataFName;
                    firebaseLName = decryptedDataLName;
                }
            })
        }

        // Import CryptoJS
        // const CryptoJS = require('crypto-js');

        // Your secret encryption key (keep it secure)
        // const secretKey = 'YourSecretKey123';

        // Generate a random secret key (32 bytes / 256 bits)
        const secretKey = 'e4e46af883548ced684eaf5d17c447c52c0d938b7e4b905738bcef51a3e88bd4';
        // const secretKey1 = Array.from(crypto.getRandomValues(new Uint8Array(32)), byte => byte.toString(16).padStart(2, '0')).join('');
        // console.log(secretKey1);

        function changePersonalInfo() {

            cancelInfo.disabled = true;
            buttonSaveInfo.disabled = true;
            inputFName.disabled = true;
            inputLName.disabled = true;

            const dbref = ref(db);
            get(child(dbref, "User/" + userID))
            .then( (snapshot)=> {
                if(snapshot.exists()) {
                    firebaseFName = snapshot.val().FirstName;
                    firebaseLName = snapshot.val().LastName;

                    // const email = snapshot.val().Email;
                    var bdate = snapshot.val().Birthdate;
                    var dateCreated = snapshot.val().DateCreated;

                    if (inputFName.value != firebaseFName || inputLName.value != firebaseLName) {

                        // Encrypt the data
                        const ciphertextFName = CryptoJS.AES.encrypt(inputFName.value, secretKey).toString();
                        const ciphertextLName = CryptoJS.AES.encrypt(inputLName.value, secretKey).toString();
                        const ciphertextEmail = CryptoJS.AES.encrypt(inputEmail.value, secretKey).toString();
                        const ciphertextBDate = CryptoJS.AES.encrypt(bdate, secretKey).toString();
                        const ciphertextDateCreated = CryptoJS.AES.encrypt(dateCreated, secretKey).toString();

                        update(ref(db, 'User/' + userID), {
                            FirstName: ciphertextFName,
                            LastName: ciphertextLName,
                            Email: ciphertextEmail,
                            // Birthdate: ciphertextBDate,
                            // DateCreated: ciphertextDateCreated,
                        })
                        
                        .then(() => {
                            editSuccessAlert.style.visibility = "visible";
                            setTimeout(function() {
                                window.location.replace("landing.html");
                            }, 2000);
                        })

                        .catch((error) => {
                            alert(error);
                        });
                    }
                }
            })
        }

        function changePass() {

            cancelPass.disabled = true;
            buttonSavePass.disabled = true;
            inputCurrentPass.disabled = true;
            inputNewPass.disabled = true;
            inputRePass.disabled = true;

            const dbref = ref(db);
            get(child(dbref, "User/" + userID))
            .then( (snapshot)=> {
                if(snapshot.exists()) {

                    const decryptedDataPassword = CryptoJS.AES.decrypt(snapshot.val().Password, secretKey).toString(CryptoJS.enc.Utf8);
                    firebasePassword = decryptedDataPassword;
                    // console.log(firebasePassword);

                    if (inputCurrentPass.value != "" || inputNewPass.value != "" || inputRePass.value != "") { 

                        if (inputCurrentPass.value == firebasePassword && inputNewPass.value == inputRePass.value) {

                            // Password Complexity

                            // Regular expressions to check for each requirement
                            const hasUppercase = /[A-Z]/;
                            const hasLowercase = /[a-z]/;
                            const hasNumeric = /[0-9]/;
                            const hasSpecialChar = /[!@#$%^&*()_+{}\[\]:;<>,.?~\\-]/;

                            // Check each requirement
                            var isUppercase = hasUppercase.test(inputNewPass.value);
                            var isLowercase = hasLowercase.test(inputNewPass.value);
                            var isNumeric = hasNumeric.test(inputNewPass.value);
                            var isSpecialChar = hasSpecialChar.test(inputNewPass.value);
                            const hasMinLength = inputNewPass.value.length >= 8;

                            // Check if all requirements are met
                            if (isUppercase && isLowercase && isNumeric && isSpecialChar & hasMinLength) {

                                // Encrypt the data
                                const ciphertextPassword= CryptoJS.AES.encrypt(inputRePass.value, secretKey).toString();

                                update(ref(db, 'User/' + userID), {
                                    Password: ciphertextPassword,
                                })
                                
                                .then(() => {
                                    editSuccessAlert.style.visibility = "visible";
                                    setTimeout(function() {
                                        window.location.replace("landing.html");
                                    }, 2000);
                                })

                                .catch((error) => {
                                    alert(error);
                                });
                            }

                            else {
                                editPassFailedAlert.style.visibility = "visible";
                                setTimeout(function() {
                                    inputCurrentPass.value = "";
                                    inputNewPass.value = "";
                                    inputRePass.value = "";
                                    editPassFailedAlert.style.visibility = "hidden";

                                    inputCurrentPass.disabled = false;
                                    inputNewPass.disabled = false;
                                    inputRePass.disabled = false;
                                }, 5000);
                            }
                        }

                        else {
                            editFailedAlert.style.visibility = "visible";
                            setTimeout(function() {
                                location.reload();
                            }, 2000);
                        }
                    }
                }
            })
            
        }

        var buttonSaveInfo = document.querySelector("#btnSaveInfo");
        buttonSaveInfo.addEventListener('click', changePersonalInfo);

        var buttonSavePass = document.querySelector("#btnSavePass");
        buttonSavePass.addEventListener('click', changePass);

        var cancelInfo = document.getElementById('btnCancelInfo');
        cancelInfo.addEventListener('click', cancelPersonalInfo);

        function cancelPersonalInfo() {
            cancelInfo.disabled = true;
            buttonSaveInfo.disabled = true;
            inputFName.value = firebaseFName;
            inputLName.value = firebaseLName;
        }

        var cancelPass = document.getElementById('btnCancelPass');
        cancelPass.addEventListener('click', cancelPassword);

        function cancelPassword() {
            cancelPass.disabled = true;
            buttonSavePass.disabled = true;
            inputCurrentPass.value = "";
            inputNewPass.value = "";
            inputRePass.value = "";
        }

        // ---------------------------------------------------------------------------------

        var buttonLanding = document.querySelector("#landingCont");
        buttonLanding.addEventListener('click', goNext1);

        function goNext1() {
            window.location.replace("landing.html");
        }

        var buttonCategory = document.querySelector("#categoriesCont");
        buttonCategory.addEventListener('click', goNext2);

        function goNext2() {
            window.location.replace("categories.html");
        }

        var buttonPlaces = document.querySelector("#placeCont");
        buttonPlaces.addEventListener('click', goNext3);

        function goNext3() {
            sessionStorage.clear();
            window.location.replace("places.html");
        }

        var buttonSignOut = document.querySelector("#signoutCont");
        buttonSignOut.addEventListener('click', goNext4);
        var buttonSignOutHref = document.querySelector("#signoutHref");
        buttonSignOutHref.addEventListener('click', goNext4);

        function goNext4() {

            logoutAlert.style.visibility = "visible";
            setTimeout(function() {
                window.location.replace("index.html");
            }, 2000);
        }

    </script>

    <!-- BOOTSTRAP v5.3 -->
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.min.js" integrity="sha384-Rx+T1VzGupg4BHQYs2gCW9It+akI2MM/mndMCy36UVfodzcJcF0GGLxZIzObiEfa" crossorigin="anonymous"></script>

    <!-- BOOTSTRAP v5.0 -->
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js" integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF" crossorigin="anonymous"></script>

</body>
</html>